"use strict";$(function(){function a(){$.ajax({url:"http://139.9.177.51:3333/p2p/getuserinfo",type:"get",data:{userid:JSON.parse(localStorage.getItem("userview")).id},success:function(e){var t,a,i,l,n=e.code;if(200===n){var o,s=e.data;for(o in console.log(s),s){["email","username","nickname","totalmoney","usablemoney","blockedmoney","lastlogintime"].includes(o)&&$("."+o).text(s[o])}t=s.totalmoney,a=s.usablemoney,i=s.blockedmoney,l=echarts.init(document.getElementById("myChart")),i={title:{text:"用户资金分布",left:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:["总金额","可用金额","冻结金额"]},series:[{name:"用户资金分布",type:"pie",radius:"55%",center:["50%","60%"],data:[{value:t,name:"总金额"},{value:a,name:"可用金额"},{value:i,name:"冻结金额"}],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]},l.setOption(i)}else 500===n&&alert(e.msg)}})}a(),$("#myModal").on("shown.bs.modal",function(){$("#edit-nickname").val($(".nickname").text()),$("#edit-email").val($(".email").text())}),$("#editBtn").click(function(){$.ajax({url:"http://139.9.177.51:3333/p2p/updateuser",type:"post",data:{userid:JSON.parse(localStorage.userview).id,nickname:$("#edit-nickname").val(),email:$("#edit-email").val()},success:function(e){var t=e.code,e=e.msg;200===t?(alert(e),a()):alert(e),$("#myModal").modal("hide")}})})});